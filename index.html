<html>
<head>
  <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
  <script src="components/change-scene-on-click.js"></script>
  <script src="components/img-on-click.js"></script>
  <script src="components/play-point-of-interest.js"></script>
  <script src="https://unpkg.com/aframe-look-at-component@0.5.1/dist/aframe-look-at-component.min.js"></script> 

  </head>
<body>
    <script>
        var scenelist = [
            {//scene0 - bathroom
              sceneref : "#bathroom",
              sceneyrot : 0.0, //< 360,
              transports: [
                {//bed
                  pos : '-8 -2 5',
                  sceneIndex : 2 //index of this array to switch to
                },
                {//NO port2
                  pos : "999999 999999 -9999999",
                  sceneIndex : 1 //index of this array to switch to
                }
              ],
              tooltips: [
                {//tip1
                  pos : '2 1 -4',
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#lift", //video asset 
                },
                {
                  pos : '4 1 -4',
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#tablet", //video asset 
                }
              ],
              narration: "#bathroomNarration" //the narration for this scene
            },
            {//scene1 - bedroom general
              sceneref : "#bedroom-general",
              sceneyrot : 0.0, //< 360,
              transports: [
                { //bed
                  pos : '-7 -2 0',
                  sceneIndex : 2 //index of this array to switch to
                },
                { //back to hallway
                  pos : '7 -2 0',
                  sceneIndex : 3 //index of this array to switch to
                }
              ],
              tooltips: [
                {//tip1
                  pos : '2 5 -4',
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#lift", //video asset 
                },
                {
                  pos : '-2 1 -4',
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#lift", //video asset 
                }]
            },
              {//scene2 - bed
                sceneref : "#bedroom-bed",
                sceneyrot : 0.0, //< 360,
                transports: [
                  { //bathroom
                    pos : '10 -1 -4',
                    sceneIndex : 0 //index of this array to switch to
                  },
                  {// bedroom general
                        pos : "20 0 0",
                        sceneIndex : 1 //index of this array to switch to
                  }
                ],
                tooltips: [
                  {//tip1
                    pos : '2 5 -4',
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#lift", //video asset 
                  },
                  {
                    pos : '-2 1 -4',
                    persistTime : 3.0, //preferably in seconds
                    videoAsset: "#lift", //video asset 
                  }
                ]
              },
              {//scene3
                sceneref : "#hallway",
                sceneyrot : 0.0, //< 360,
                transports: [
                  {//bedroom general
                    pos : '-9 -1 2',
                    sceneIndex : 1 //index of this array to switch to
                  },
                  {//back downstairs
                    pos : "8 -1 4",
                    sceneIndex : 4 //index of this array to switch to
                  },
                ],
                tooltips: [
                  {//tip1
                    pos : '2 5 -4',
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#lift", //video asset 
                  },
                  {
                    pos : '-2 1 -4',
                    persistTime : 3.0, //preferably in seconds
                    videoAsset: "#lift", //video asset 
                  }
                ]
              },
              {//scene4 - ground floor
                sceneref : "#ground-floor",
                sceneyrot : 0.0, //< 360,
                transports: [
                  { //back to entrance
                    pos : '-4 -3 10',
                    sceneIndex : 7 //index of this array to switch to elevator
                  },
                  { //inside elevator
                    pos : '-10 -2 3',
                    sceneIndex : 5 //index of this array to switch to elevator
                  }
                ],
                tooltips: [
                  {//tip1
                    pos : '2 5 -4',
                  text : "#image1",
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#lift", //video asset 
                  },
                  {
                    pos : '-2 1 -4',
                    persistTime : 3.0, //preferably in seconds
                    videoAsset: "#lift", //video asset 
                  }
                ]
              },
              {//scene5 - elevator
                sceneref : "#elevator",
                sceneyrot : 0.0, //< 360,
                transports: [
                  {
                    pos : '10 -2 0',
                    sceneIndex : 3 //index of this array to switch to hallway
                  },
                  {//NO port2
                    pos : "999999 999999 -9999999",
                    sceneIndex : 1 //index of this array to switch to
                  }
                ],
                tooltips: [
                  {//tip1
                    pos : '2 5 -4',
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#lift", //video asset 
                  },
                  {
                    pos : '-2 1 -4',
                    persistTime : 3.0, //preferably in seconds
                    videoAsset: "#lift", //video asset 
                  }
                ]
              },
            {//scene6 - bottom floor common area
                sceneref : "#common-area",
                sceneyrot : 0.0, //< 360,
                transports: [
                    { //back to entrance
                        pos : '-18 -2 -3',
                        sceneIndex : 7 //index of this array to switch to hallway
                    },
                    { //NO PORT2
                        pos : '999999 999999 -9999999',
                        sceneIndex : 3 //index of this array to switch to hallway
                    }
                ],
                tooltips: [
                  {//tip1
                    pos : '2 5 -4',
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#lift", //video asset
                  },
                  {
                    pos : '-2 1 -4',
                    persistTime : 3.0, //preferably in seconds
                    videoAsset: "#lift" //video asset
                  }
                ]
            },
            {//scene7 - entrance
                sceneref : "#entrance",
                sceneyrot : 0.0, //< 360,
                transports: [
                    {//bottom floor elevator
                        pos : "-3 -1 -13",
                        sceneIndex : 4 //index of this array to switch to
                    },
                    {//common-area
                        pos : "-15 -3 3",
                        sceneIndex : 6 //index of this array to switch to
                    }
                ],
                tooltips: [
                  {//tip1
                    pos : '2 5 -4',
                  persistTime : 3.0, //preferably in seconds
                  videoAsset: "#lift", //video asset
                  },
                  {
                    pos : '-2 1 -4',
                    persistTime : 3.0, //preferably in seconds
                    videoAsset: "#lift", //video asset
                  }
                ]
            }
          ];
      </script>
  <a-scene>

    <!-- Warp boxes -->
    <a-triangle color="#EF2D5E" position="-15 -1 4" vertex-a="0 1 0" vertex-b="-1 -1 0" vertex-c="1 -1 0" rotation="0 90 0" change-scene-on-click="sceneNum: 7">
    </a-triangle>
    <a-triangle color="#EF2D5E" position="999999 999999 -9999999" vertex-a="0 1 0" vertex-b="-1 -1 0" vertex-c="1 -1 0" rotation="0 90 0" change-scene-on-click="sceneNum: 7">
    </a-triangle>

    <!-- Narration --> 
    <a-entity id="sceneNarration" sound="src:#bathroomNarration; autoplay: true;">
    </a-entity>

    <!-- Point of interest 1 -->
    <a-circle id="poi1" src="images/Information_icon.svg.png" position="2 1 -4"
      img-on-click="target: #image1"
      geometry="primitive: circle; radius: .2"
      look-at="[camera]">

       <!-- 2 1 -4-->
      <a-entity class="vidpanel" play-point-of-interest="poi: #lift" geometry="primitive:plane; width:3; height:2" id="image1" visible="false" position="0 0 3"
         height="3" width="6" material="shader:flat;src: #lift;" 
         look-at="[camera]">
      </a-entity>

    </a-circle>

    <!-- Point of interest 2 -->
    <a-circle id="poi2" src="images/Information_icon.svg.png" position="-2 2 -4"
      img-on-click="target: #image2"
      geometry="primitive: circle; radius: .2"
      look-at="[camera]">

      <a-entity class="vidpanel" play-point-of-interest="poi: #lift" geometry="primitive:plane; width:3; height:2" id="image2" visible="false" position="0 0 3" 
         height="3" width="6" material="shader:flat; src: #lift;" 
         look-at="[camera]" >
      </a-entity>

    </a-circle>
    
    <!-- Camera -->
    <a-entity camera look-controls>
      <a-entity cursor="fuse: true; fuseTimeout: 1000"
        position="0 0 -1"
        geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
        material="color: black; shader: flat">

        <!-- Cursor -->
        <a-animation begin="cursor-fusing" easing="ease-in" attribute="scale" dur="1000"
          fill="backwards" from="1 1 1" to="0.1 0.1 0.1">
        </a-animation>

      </a-entity>
    </a-entity>
    
    <!-- First scene -->
    <a-sky src="#outside-entrance"></a-sky>
    <!-- List of images and video -->
    <a-assets>
      <!-- <img id="low"
        src="https://image.ibb.co/dczpeU/bathroom-low.jpg" crossorigin="anonymous">
      <img id="med"
        src="https://image.ibb.co/j0KKDp/bathroom-high.jpg" crossorigin="anonymous">
      <img id="hi"
        src="https://image.ibb.co/gXsNYp/bathroom-highest.jpg" crossorigin="anonymous">
      <img id="hires" 
        src="https://image.ibb.co/e189af/xY-nU76w.jpg" crossorigin="anonymous"> -->
      <img id="poi"
        src="https://image.ibb.co/ezKJFq/stefan-chair-black-0122106-PE278491-S4-1.jpg" crossorigin="anonymous">
      <img id="outside-entrance" src="images\outside-entrance.jpg">
      <img id="bedroom-general" src="images\front-dorm-room.jpg">
      <img id="bedroom-bed" src="images\back-dorm-room.jpg">
      <img id="hallway" src="images\hallway.jpg">
      <img id="entrance" src="images\entrance.jpg">
      <img id="ground-floor" src="images\bottom-floor-elevator.jpg">
      <img id="elevator" src="images\elevator-in.jpg">
      <img id="bathroom" src="images\bathroom.jpg">
      <img id="common-area" src="images\common-area2.jpg">

      <video id="lift" autoplay="false" muted="true" src="videos/lift.mp4" crossorigin="anonymous">
      <video id="tablet" autoplay="false" muted="true" src="videos/lift.mp4" crossorigin="anonymous">
      <audio id="bathroomNarration" autoplay:"false" src="narrations/stock.mp3">
      </a-assets>
  </a-scene>
</body>
</html>